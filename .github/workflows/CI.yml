name: CI

on:
  pull_request:
    branches:
      - master
      - develop
      - release

jobs:
  codeQuality:
    name: Code Quality
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        name: Checkout
      
      - uses: norio-nomura/action-swiftlint@3.2.1
        name: SwiftLint
        with:
          args: --strict
  build:
    name: Build
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v2
      name: Checkout
    
    - run: mkdir build/
    - run: mkdir build/y
    - run: mkdir build/y/z
    
    - uses: actions/upload-artifact@v2
      with:
        name: build
        path: build/
  test:
    needs: build
    name: Test
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v2
      name: Checkout
    
    - uses: actions/download-artifact@v2
      with:
        name: build
        
    - name: Display structure of downloaded files
      run: ls -R
